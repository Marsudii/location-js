<html>
<head> 

</head>
<body>
<div style="align:center">
  <h1>Detail Lokasi</h1>
  <input type="text" id="myid" readonly />
<br/>

  <p>latitude : <input type="text" name="lat" id="lat" value="" /></p>

  <p>longitude :<input type="text" name="lng" id="lng" value="" /> </p>

  <a id="https://maps.google.com/?ll=latitude,longitude" target="_blank"><button>LIHAT GOOGLE MAPS</button></a>
</div>

 




<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script >

  var $locationText = $(".location")
  
  let $latAbsen = $(".absenLat")
  let $lngAbsen = $(".absenLng")
  
  
  
  // Check for geolocation browser support and execute success method
  if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
          geoLocationSuccess,
          geoLocationError, {
              timeout: 10000
          }
      )
  } else {
      alert("your browser doesn't support geolocation")
  }
  
  function geoLocationSuccess(pos) {
      // get user lat,long
      var myLat = pos.coords.latitude,
          myLng = pos.coords.longitude,
          loadingTimeout
  
      var loading = function() {
          $locationText.text("fetching...")
      }
  
      loadingTimeout = setTimeout(loading, 600)
  
      var request = $.get(
              "https://nominatim.openstreetmap.org/reverse?format=json&lat=" +
              myLat +
              "&lon=" +
              myLng
          )
          .done(function(data) {
              if (loadingTimeout) {
                  clearTimeout(loadingTimeout)
                  loadingTimeout = null
                  $locationText.text(data.display_name)
                  $latAbsen.text(myLat)
                  $lngAbsen.text(myLng)
                  $("#myid").val(data.display_name)
  
  
              }
          })
          .fail(function() {
              // handle error
          })
  }
  
  function geoLocationError(error) {
      var errors = {
          1: "Permission denied",
          2: "Position unavailable",
          3: "Request timeout",
      }
      alert("Error: " + errors[error.code])
  }
      </script>
</body>

    <script
    src="https://code.jquery.com/jquery-3.6.1.slim.js"
    integrity="sha256-tXm+sa1uzsbFnbXt8GJqsgi2Tw+m4BLGDof6eUPjbtk="
    crossorigin="anonymous"></script>
   
    <script src="location.js"></script>
    
</body>
</html>